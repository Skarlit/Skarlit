webpackJsonp([1],{0:function(e,t,n){e.exports=n(161)},161:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=n(3),r=i(a),o=n(162),s=n(164),l=r["default"].createClass({displayName:"App",componentDidMount:function(){},render:function(){return r["default"].createElement("div",{className:"app"},r["default"].createElement("canvas",{id:"canvas-overlay",ref:"background"}),r["default"].createElement(s.Term,null))}});r["default"].createClass({displayName:"NotFound",render:function(){return r["default"].createElement("div",null,r["default"].createElement("div",null," "))}});window.onload=function(){r["default"].render(r["default"].createElement(l,null),document.getElementById("body"),function(){o.Rain().start()})}},162:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(){var e,t=!0,n=document.createElement("a");n.href="javascript://",n.textContent="Bloom Toggle",n.style.position="absolute",n.id="bloom-toggle",n.addEventListener("click",function(){t=!t,t?n.textContent="Bloom on":n.textContent="Bloom off",console.log("bloom is now ",t)}),document.body.appendChild(n);var i=new s["default"].WebGLRenderer({canvas:document.getElementById("canvas-overlay")});i.setSize(window.innerWidth,window.innerHeight);var a=new s["default"].Scene,o=new s["default"].OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-500,1e4);o.position.z=100;var l=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat}),u=new r(window.innerWidth,window.innerHeight);a.add(u.ps);var v=new s["default"].OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-500,1e4);v.position.z=100;var m=new s["default"].PlaneBufferGeometry(window.innerWidth,window.innerHeight),p=new s["default"].ShaderMaterial({uniforms:{texture:{type:"t",value:l},direction:{type:"v2",value:new s["default"].Vector2(5e-4,0)}},vertexShader:d,fragmentShader:h}),g=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat}),w=new s["default"].Mesh(m,p),y=new s["default"].Scene;y.add(w);var b=new s["default"].ShaderMaterial({uniforms:{texture:{type:"t",value:l},direction:{type:"v2",value:new s["default"].Vector2(0,5e-4)}},vertexShader:d,fragmentShader:h}),x=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat}),E=new s["default"].Mesh(m,b),C=new s["default"].Scene;C.add(E);var M=new s["default"].ShaderMaterial({uniforms:{h_blur:{type:"t",value:g},v_blur:{type:"t",value:x},image:{type:"t",value:l}},vertexShader:c,fragmentShader:f}),S=new s["default"].Mesh(m,M),k=new s["default"].Scene;k.add(S);var N=new s["default"].Clock;N.start(),window.addEventListener("resize",function(){v.aspect=window.innerWidth/window.innerHeight,v.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)});var D=function _(){e=requestAnimationFrame(_);var n=N.getDelta();u.update(n),t?(i.render(a,o,l,!0),i.render(y,v,g,!0),i.render(C,v,x,!0),i.render(k,v)):i.render(a,o)};return{start:function(){D()},end:function(){window.cancelAnimationFrame(e)}}}function r(e,t){this.w=e,this.h=t,this.psGeo=new s["default"].BufferGeometry,this.letterCount=32,this.alphabetWidth=1024,this.offsetTable=new Array(32);for(var n=0;n<this.letterCount;n++)this.offsetTable[n]=n/this.letterCount;this.gridSize=32,this.n=Math.ceil(this.h/this.gridSize),this.m=Math.ceil(this.w/this.gridSize),this.alphas=new Float32Array(this.n*this.m),this.offset=new Float32Array(this.n*this.m),this.vertices=new Float32Array(this.n*this.m*3),this.scannerNum=2*this.m,this.depth=-5;for(var n=0;n<this.n;n++)for(var i=0;i<this.m;i++)this.vertices[n*this.m*3+3*i]=i*this.gridSize-this.w/2,this.vertices[n*this.m*3+3*i+1]=-n*this.gridSize+this.h/2,this.vertices[n*this.m*3+3*i+2]=this.depth,this.alphas[n*this.m+i]=0,this.offset[n*this.m+i]=this.offsetTable[parseInt(Math.random()*this.letterCount)];this.scanners=[];for(var n=0;n<this.scannerNum;n++)this.scanners.push({col:Math.round(this.m*Math.random()),row:Math.random()*this.n,v:2+6*Math.random()});this.psGeo.addAttribute("position",new s["default"].BufferAttribute(this.vertices,3)),this.psGeo.addAttribute("alphas",new s["default"].BufferAttribute(this.alphas,1)),this.psGeo.addAttribute("offset",new s["default"].BufferAttribute(this.offset,1));var a=s["default"].ImageUtils.loadTexture("../img/alphabet.png");a.flipY=!1;var r={color:{type:"c",value:new s["default"].Color(26367)},texture:{type:"t",value:a}};this.psMat=new s["default"].ShaderMaterial({uniforms:r,vertexShader:l,fragmentShader:u,transparent:!0}),this.ps=new s["default"].Points(this.psGeo,this.psMat),this.ps.position.z=-10,this.skipFrame=12,this.count=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Rain=a;var o=n(163),s=i(o),l="\n    attribute float alphas;\n    attribute float offset;\n\n    varying float vAlpha;\n    varying float vOffset;\n\n    void main() {\n        vAlpha = alphas;\n        vOffset = offset;\n\n        gl_PointSize = 32.0;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",u="\n    uniform vec3 color;\n    uniform sampler2D texture;\n\n    varying float vAlpha;\n    varying float vOffset;\n\n    void main() {\n        vec4 tex_color = texture2D(texture, gl_PointCoord * vec2(0.03125, 1.0) + vec2(vOffset, 0.0));\n        gl_FragColor = vec4(tex_color.xyz + color, tex_color.a * vAlpha);\n    }\n",d="\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",h="\n    uniform sampler2D texture;\n    uniform vec2 direction;\n\n    varying vec2 vUv;\n    void main() {\n      vec4 color = vec4(0.0);\n      vec2 off1 = vec2(1.411764705882353) * direction;\n      vec2 off2 = vec2(3.2941176470588234) * direction;\n      vec2 off3 = vec2(5.176470588235294) * direction;\n      color += texture2D(texture, vUv) * 0.1964825501511404;\n      color += texture2D(texture, vUv + (off1)) * 0.2969069646728344;\n      color += texture2D(texture, vUv - (off1)) * 0.2969069646728344;\n      color += texture2D(texture, vUv + (off2)) * 0.09447039785044732;\n      color += texture2D(texture, vUv - (off2)) * 0.09447039785044732;\n      color += texture2D(texture, vUv + (off3)) * 0.010381362401148057;\n      color += texture2D(texture, vUv - (off3)) * 0.010381362401148057;\n      gl_FragColor = color;\n    }\n",c="\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",f="\n    uniform sampler2D h_blur;\n    uniform sampler2D v_blur;\n    uniform sampler2D image;\n\n    varying vec2 vUv;\n    void main() {\n      vec3 image_color = texture2D(image, vUv ).rgb;\n      vec3 bloom_color = texture2D(h_blur, vUv ).rgb + texture2D(v_blur, vUv ).rgb;\n      image_color += bloom_color;\n      vec3 result = vec3(1.0) - exp(-image_color * 0.6);\n      result = pow(result, vec3(1.0 / 1.8));\n      gl_FragColor = vec4(result, 1.0);\n\n    }\n";r.prototype={update:function(e){this.count++;for(var t=this.psGeo.attributes.alphas.array,n=this.psGeo.attributes.offset.array,i=0;i<this.scanners.length;i++){var a=Math.round(this.scanners[i].row)*this.m+this.scanners[i].col;t[a]=Math.min(1,t[a]+.2),this.scanners[i].row+=e*this.scanners[i].v,this.scanners[i].row>this.n-1&&(this.scanners[i]={col:parseInt(this.m*Math.random()),row:Math.random()*this.n/2,v:2+6*Math.random()})}for(var r=0;r<t.length;r++)t[r]*=.97;if(this.count>this.skipFrame){this.count=0;for(var r=0;r<2*this.m;r++)n[parseInt(n.length*Math.random())]=this.offsetTable[parseInt(Math.random()*this.letterCount)]}this.psGeo.attributes.alphas.needsUpdate=!0,this.psGeo.attributes.offset.needsUpdate=!0}}},164:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),s=i(o),l=n(159),u=i(l),d="\n  About Code Rain: \n\n    This is a experiment I did using THREE.JS. \n\n    Bloom effect uses 9x9 gaussian blur filter with horizontal and vertical pass. \n\n    Since gaussian can be factor into x and y components two pass is O(n) compared to O(n^2) single pass. \n\n    Ported from https://github.com/Jam3/glsl-fast-gaussian-blur \n\n",h=s["default"].createClass({displayName:"Term",getInitialState:function(){return{initialized:!1}},componentDidMount:function(){var e=u["default"](this.refs.term.getDOMNode());e.width(window.innerWidth<400?.8*window.innerWidth:640),e.height(window.innerHeight<400?.8*window.innerHeight:480),e.css("margin-left",-e.width()/2),e.css("margin-top",-e.height()/2)},componentWillUnmount:function(){},focus:function(){u["default"]("#user-input").focus()},render:function(){return s["default"].createElement("div",{id:"term",ref:"term"},s["default"].createElement("div",{style:{position:"relative",width:"100%",height:"100%"},onClick:this.focus.bind(this)},s["default"].createElement(c,{key:"termhead"}),s["default"].createElement(f,{key:"termbody"})))}});t.Term=h;var c=s["default"].createClass({displayName:"TermHead",render:function(){return s["default"].createElement("div",{id:"term-head"},s["default"].createElement("div",{className:"title"},"Welcome to Ran Xie's Homepage"))}}),f=s["default"].createClass({displayName:"TermBody",componentDidUpdate:function(){var e=this.refs.termBody.getDOMNode();e.scrollTop=e.scrollHeight},getInitialState:function(){return{userInput:"",loc:["~"],dispStack:[d]}},componentDidMount:function(){new p(this)},render:function(){for(var e=[],t=0;t<this.state.dispStack.length;t++)e.push(s["default"].createElement(v,{key:"output-"+t,output:this.state.dispStack[t]}));return s["default"].createElement("div",{id:"term-body",ref:"termBody"},e,s["default"].createElement(m,{userInput:this.state.userInput,loc:this.state.loc.join("/")}))}}),v=s["default"].createClass({displayName:"Output",render:function(){for(var e=this.props.output.split("\n"),t=[],n=0;n<e.length;n++)t.push(s["default"].createElement("div",{className:"line"},e[n]));return s["default"].createElement("div",{className:"output"},t)}}),m=s["default"].createClass({displayName:"CurrentLine",render:function(){return s["default"].createElement("div",{id:"current-line",className:"section"},s["default"].createElement("span",{className:"prefix"},"guest@Skarlit.github.io ",this.props.loc,">"),s["default"].createElement("span",{id:"user-input"},this.props.userInput),s["default"].createElement("span",{className:"blinking-cursor"}))}}),p=function(){function e(t){a(this,e),this.view=t,this.inputQueue=[],this.initListener()}return r(e,[{key:"initListener",value:function(){u["default"](window).on("keydown",function(e){switch(e.which){case 13:e.preventDefault(),e.stopPropagation(),this.cloneCurrentLine(),this.inputQueue=[];break;case 8:e.preventDefault(),e.stopPropagation(),this.inputQueue.pop();break;default:var t=String.fromCharCode(e.which);this.inputQueue.push(e.shiftKey?t:t.toLowerCase())}this.view.setState({userInput:this.inputQueue.join("")})}.bind(this)),u["default"](window).on("mousewheel",function(e){var t=e.originalEvent.wheelDelta;this.view.refs.termBody.getDOMNode().scrollTop-=t}.bind(this))}},{key:"cloneCurrentLine",value:function(){var e="guest@Skarlit.github.io "+this.view.state.loc+"> "+this.inputQueue.join("");this.view.state.dispStack.push(e),this.view.setState({})}}]),e}()}});