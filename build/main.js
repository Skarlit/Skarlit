webpackJsonp([1],{0:function(e,t,n){e.exports=n(156)},156:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var a=n(3),r=i(a),o=n(157),s=n(159),l=r["default"].createClass({displayName:"App",componentDidMount:function(){},render:function(){return r["default"].createElement("div",{className:"app"},r["default"].createElement("canvas",{id:"canvas-overlay",ref:"background"}),r["default"].createElement(s.Term,null))}});r["default"].createClass({displayName:"NotFound",render:function(){return r["default"].createElement("div",null,r["default"].createElement("div",null," "))}});window.onload=function(){r["default"].render(r["default"].createElement(l,null),document.getElementById("body"),function(){o.Rain().start()})}},157:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(){var e,t=v()?!1:!0,n=document.getElementById("bloom-toggle")||document.createElement("a");n.href="javascript://",n.textContent=t?"Bloom off":"Bloom on",n.style.position="absolute",n.id="bloom-toggle",u["default"](n).on("click",function(){t=!t,n.textContent=t?"Bloom off":"Bloom on"}),document.body.appendChild(n);var i=new s["default"].WebGLRenderer({canvas:document.getElementById("canvas-overlay")});i.setSize(window.innerWidth,window.innerHeight);var o=new s["default"].Scene,l=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat}),d=new r(window.innerWidth,window.innerHeight);o.add(d.ps);var h=new s["default"].OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,-500,1e4);h.position.z=100;var g=new s["default"].PlaneBufferGeometry(window.innerWidth,window.innerHeight),w=new s["default"].ShaderMaterial({uniforms:{texture:{type:"t",value:l},direction:{type:"v2",value:new s["default"].Vector2(.001,0)}},vertexShader:c,fragmentShader:f}),y=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat}),b=new s["default"].Mesh(g,w),x=new s["default"].Scene;x.add(b);var k=new s["default"].ShaderMaterial({uniforms:{texture:{type:"t",value:l},direction:{type:"v2",value:new s["default"].Vector2(0,.001)}},vertexShader:c,fragmentShader:f}),E=new s["default"].WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:s["default"].LinearFilter,magFilter:s["default"].NearestFilter,format:s["default"].RGBFormat}),C=new s["default"].Mesh(g,k),M=new s["default"].Scene;M.add(C);var S=new s["default"].ShaderMaterial({uniforms:{h_blur:{type:"t",value:y},v_blur:{type:"t",value:E},image:{type:"t",value:l}},vertexShader:m,fragmentShader:p}),N=new s["default"].Mesh(g,S),D=new s["default"].Scene;D.add(N);var _=new s["default"].Clock;_.start();var B;window.addEventListener("resize",function(){B&&window.clearTimeout(B),e&&window.cancelAnimationFrame(e),n&&u["default"](n).off("click"),B=window.setTimeout(function(){a().start()},400)}.bind(this));var U=function I(){e=requestAnimationFrame(I);var n=_.getDelta();d.update(n),t?(i.render(o,h,l,!0),i.render(x,h,y,!0),i.render(M,h,E,!0),i.render(D,h)):i.render(o,h)};return{start:function(){U()},end:function(){window.cancelAnimationFrame(e)}}}function r(e,t){this.w=e,this.h=t,this.psGeo=new s["default"].BufferGeometry,this.letterCount=32,this.alphabetWidth=1024,this.offsetTable=new Array(32);for(var n=0;n<this.letterCount;n++)this.offsetTable[n]=n/this.letterCount;this.gridSize=32,this.n=Math.ceil(this.h/this.gridSize),this.m=Math.ceil(this.w/this.gridSize),this.alphas=new Float32Array(this.n*this.m),this.offset=new Float32Array(this.n*this.m),this.vertices=new Float32Array(this.n*this.m*3),this.scannerNum=2*this.m,this.depth=-5;for(var n=0;n<this.n;n++)for(var i=0;i<this.m;i++)this.vertices[n*this.m*3+3*i]=i*this.gridSize-this.w/2,this.vertices[n*this.m*3+3*i+1]=-n*this.gridSize+this.h/2,this.vertices[n*this.m*3+3*i+2]=this.depth,this.alphas[n*this.m+i]=0,this.offset[n*this.m+i]=this.offsetTable[parseInt(Math.random()*this.letterCount)];this.scanners=[];for(var n=0;n<this.scannerNum;n++)this.scanners.push({col:Math.round(this.m*Math.random()),row:Math.random()*this.n,v:2+6*Math.random()});this.psGeo.addAttribute("position",new s["default"].BufferAttribute(this.vertices,3)),this.psGeo.addAttribute("alphas",new s["default"].BufferAttribute(this.alphas,1)),this.psGeo.addAttribute("offset",new s["default"].BufferAttribute(this.offset,1));var a=s["default"].ImageUtils.loadTexture("../img/alphabet.png");a.flipY=!1;var r={color:{type:"c",value:new s["default"].Color(26367)},texture:{type:"t",value:a}};this.psMat=new s["default"].ShaderMaterial({uniforms:r,vertexShader:d,fragmentShader:h,transparent:!0}),this.ps=new s["default"].Points(this.psGeo,this.psMat),this.ps.position.z=-10,this.skipFrame=12,this.count=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Rain=a;var o=n(158),s=i(o),l=n(154),u=i(l),d="\n    attribute float alphas;\n    attribute float offset;\n\n    varying float vAlpha;\n    varying float vOffset;\n\n    void main() {\n        vAlpha = alphas;\n        vOffset = offset;\n\n        gl_PointSize = 32.0;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",h="\n    uniform vec3 color;\n    uniform sampler2D texture;\n\n    varying float vAlpha;\n    varying float vOffset;\n\n    void main() {\n        vec4 tex_color = texture2D(texture, gl_PointCoord * vec2(0.03125, 1.0) + vec2(vOffset, 0.0));\n        gl_FragColor = vec4(tex_color.xyz + color, tex_color.a * vAlpha);\n    }\n",c="\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",f="\n    uniform sampler2D texture;\n    uniform vec2 direction;\n\n    varying vec2 vUv;\n    void main() {\n      vec4 color = vec4(0.0);\n      vec2 off1 = vec2(1.411764705882353) * direction;\n      vec2 off2 = vec2(3.2941176470588234) * direction;\n      vec2 off3 = vec2(5.176470588235294) * direction;\n      color += texture2D(texture, vUv) * 0.1964825501511404;\n      color += texture2D(texture, vUv + (off1)) * 0.2969069646728344;\n      color += texture2D(texture, vUv - (off1)) * 0.2969069646728344;\n      color += texture2D(texture, vUv + (off2)) * 0.09447039785044732;\n      color += texture2D(texture, vUv - (off2)) * 0.09447039785044732;\n      color += texture2D(texture, vUv + (off3)) * 0.010381362401148057;\n      color += texture2D(texture, vUv - (off3)) * 0.010381362401148057;\n      gl_FragColor = color;\n    }\n",m="\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n",p="\n    uniform sampler2D h_blur;\n    uniform sampler2D v_blur;\n    uniform sampler2D image;\n\n    varying vec2 vUv;\n    void main() {\n      vec3 image_color = texture2D(image, vUv ).rgb;\n      vec3 bloom_color = texture2D(h_blur, vUv ).rgb + texture2D(v_blur, vUv ).rgb;\n      image_color += bloom_color;\n      vec3 result = vec3(1.0) - exp(-image_color * 0.6);\n      result = pow(result, vec3(1.0 / 1.8));\n      gl_FragColor = vec4(result, 1.0);\n\n    }\n",v=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e};r.prototype={update:function(e){this.count++;for(var t=this.psGeo.attributes.alphas.array,n=this.psGeo.attributes.offset.array,i=0;i<this.scanners.length;i++){var a=Math.round(this.scanners[i].row)*this.m+this.scanners[i].col;t[a]=Math.min(1,t[a]+.2),this.scanners[i].row+=e*this.scanners[i].v,this.scanners[i].row>this.n-1&&(this.scanners[i]={col:parseInt(this.m*Math.random()),row:Math.random()*this.n/2,v:2+6*Math.random()})}for(var r=0;r<t.length;r++)t[r]*=.97;if(this.count>this.skipFrame){this.count=0;for(var r=0;r<2*this.m;r++)n[parseInt(n.length*Math.random())]=this.offsetTable[parseInt(Math.random()*this.letterCount)]}this.psGeo.attributes.alphas.needsUpdate=!0,this.psGeo.attributes.offset.needsUpdate=!0}}},159:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),s=i(o),l=n(154),u=i(l),d="\n  About Code Rain: \n\n    Powered by THREE.JS. \n\n    Bloom effect uses 9x9 gaussian blur filter with horizontal and vertical pass. \n\n    2 passes are ported from https://github.com/Jam3/glsl-fast-gaussian-blur \n\n",h=s["default"].createClass({displayName:"Term",getInitialState:function(){return{initialized:!1}},componentDidMount:function(){var e=u["default"](this.refs.term.getDOMNode());e.width(window.innerWidth<400?.8*window.innerWidth:640),e.height(window.innerHeight<400?.8*window.innerHeight:480),e.css("margin-left",-e.width()/2),e.css("margin-top",-e.height()/2)},componentWillUnmount:function(){},focus:function(){u["default"]("#user-input").focus()},render:function(){return s["default"].createElement("div",{id:"term",ref:"term"},s["default"].createElement("div",{style:{position:"relative",width:"100%",height:"100%"},onClick:this.focus.bind(this)},s["default"].createElement(c,{key:"termhead"}),s["default"].createElement(f,{key:"termbody"})))}});t.Term=h;var c=s["default"].createClass({displayName:"TermHead",render:function(){return s["default"].createElement("div",{id:"term-head"},s["default"].createElement("div",{className:"title"},"Welcome to Ran Xie's Homepage"))}}),f=s["default"].createClass({displayName:"TermBody",componentDidUpdate:function(){var e=this.refs.termBody.getDOMNode();e.scrollTop=e.scrollHeight},getInitialState:function(){return{userInput:"",loc:["~"],dispStack:[d]}},componentDidMount:function(){new v(this)},render:function(){for(var e=[],t=0;t<this.state.dispStack.length;t++)e.push(s["default"].createElement(m,{key:"output-"+t,output:this.state.dispStack[t]}));return s["default"].createElement("div",{id:"term-body",ref:"termBody"},e,s["default"].createElement(p,{userInput:this.state.userInput,loc:this.state.loc.join("/")}))}}),m=s["default"].createClass({displayName:"Output",render:function(){for(var e=this.props.output.split("\n"),t=[],n=0;n<e.length;n++)t.push(s["default"].createElement("div",{className:"line"},e[n]));return s["default"].createElement("div",{className:"output"},t)}}),p=s["default"].createClass({displayName:"CurrentLine",render:function(){return s["default"].createElement("div",{id:"current-line",className:"section"},s["default"].createElement("span",{className:"prefix"},"guest@Skarlit.github.io ",this.props.loc,">"),s["default"].createElement("span",{id:"user-input"},this.props.userInput),s["default"].createElement("span",{className:"blinking-cursor"}))}}),v=function(){function e(t){a(this,e),this.view=t,this.inputQueue=[],this.initListener()}return r(e,[{key:"initListener",value:function(){u["default"](window).on("keydown",function(e){switch(e.which){case 13:e.preventDefault(),e.stopPropagation(),this.cloneCurrentLine(),this.inputQueue=[];break;case 8:e.preventDefault(),e.stopPropagation(),this.inputQueue.pop();break;default:var t=String.fromCharCode(e.which);this.inputQueue.push(e.shiftKey?t:t.toLowerCase())}this.view.setState({userInput:this.inputQueue.join("")})}.bind(this)),u["default"](window).on("mousewheel",function(e){var t=e.originalEvent.wheelDelta;this.view.refs.termBody.getDOMNode().scrollTop-=t}.bind(this))}},{key:"cloneCurrentLine",value:function(){var e="guest@Skarlit.github.io "+this.view.state.loc+"> "+this.inputQueue.join("");this.view.state.dispStack.push(e),this.view.setState({})}}]),e}()}});